---
title: "Yahtzee"
author: "Heath Blackmon"
date: '2022-09-11'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## R Basics


The last R file that I gave to you illustrated many basic functions in R. Lets have some fun with this by using those skills that we have learned so far to learn about the game Yahtzee.


## How Yahtzee works


First I have to admit that I did not remember the rules correctly when I we did this in class so it wasn't exactly correct. But [here is a link to hasbro](https://www.hasbro.com/common/instruct/yahtzee.pdf) with the basics of this game. What we are going to do today is see how often we would expect someone to be able to get all five dice to be sixes. The basics of the game if you don't want to read are that you can roll the dice 3 times so you might roll the five dice and get one six you could pick up the four dice that weren't sixes and roll them again and you could do this process twice.


## Simulating a dice roll


Simulating random processes in R is a common task. Many times we can do this using the function `sample`. Lets look at how we use this function to roll five dice:


```{r}
roll <- sample(x = 1:6,
               size = 5,
               replace = T)
```


This code will create a new variable `roll` that will be a numeric vector of length five where each element will have the value we rolled on one of the dice.


## Repeating a process


Often in R we will want to repeat a process many times for this purpose we learned to use control function `for`. Lets look at how we can use for to roll dice three times:


```{r}
for(i in 1:3){
  roll <- sample(x = 1:6,
               size = 5,
               replace = T)
}
```


While this does what we asked it will actually roll all five dice three times and it won't evaluate whether or not we got any sixes in our rolls. Lets use one of the logical functions that we have talked about `==` to find out if any of our rolls were six.


```{r}
for(i in 1:3){
  roll <- sample(x = 1:6,
               size = 5,
               replace = T)
  roll == 6
}
```


## Keeping track of things


When we run this code what we find is that `roll == 6` returns a logical vector of length 5 each element of that vector tells us whether the elements of roll (which remember stores the outcome of our dice rolls) are equal to six.

That means that we are getting close to doing what we want to. The last step in this would be to keep track of how many sixes we roll. To do this we will take advantage of the fact that TRUE and FALSE can be treated as numbers with values of one and zero respectively. This means we can use the function `sum` to count the number of sixes we have rolled. Lets go a step further and add a variable called `hits` that will keep track of how many times we have rolled a six on our dice. This will allow us to simulate the process of only rolling dice that haven't already been rolled as a six.


```{r}
hits <- 0
for(i in 1:3){
  roll <- sample(x = 1:6,
               size = 5-hits,
               replace = T)
  hits <- hits + sum(roll == 6)
}
```


So thats actually it that code will run one turn of Yahtzee. Now that we have built it we could do some fun stuff with it. For instance we could se how long it takes to have a turn where you end up with five sixes.

## Getting five sixes

So how will we do this. Well we learned about another control structure the other day `while` we could create a variable that we set to be true then go into a while loop where that variable is set to false once we have our desired outcome (five sixes rolled):


```{r}
trying <- T
turns <- 0
while(trying){
  turns <- turns + 1
  hits <- 0
  for(i in 1:3){
    roll <- sample(x = 1:6,
                   size = 5-hits,
                   replace = T)
    hits <- hits + sum(roll == 6)
  }
  if(hits == 5){
    trying <- F
  }
}
```


## Learning about expectations

So we did this once above. We may have been lucky or unlucky though. To really learn what to expect we might want to repeat the above many times. We can do that with a for loop.

```{r}
turns.iter <-c()
for(j in 1:1000){
  trying <- T
  turns <- 0
  while(trying){
    turns <- turns + 1
    hits <- 0
    for(i in 1:3){
      roll <- sample(x = 1:6,
                     size = 5-hits,
                     replace = T)
      hits <- hits + sum(roll == 6)
    }
    if(hits == 5){
      trying <- F
    }
  }
  turns.iter[j] <- turns
}

```

Now we could examine the variable `turns.iter` to undestand what is really likely to occur over many games of Yahtzee.

```{r}
hist(turns.iter,
     main = "Five sixes in Yahtzee",
     xlab = "Number of turns required")
```